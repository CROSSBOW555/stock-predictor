<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Trend Predictor</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f0f2f5; color: #1c1e21; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { background-color: #ffffff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); padding: 2rem; max-width: 800px; width: 100%; }
        h1 { color: #0d1117; border-bottom: 2px solid #0969da; padding-bottom: 10px; }
        form { display: flex; gap: 10px; margin-bottom: 1.5rem; }
        input[type="text"] { flex-grow: 1; padding: 12px; border: 1px solid #d0d7de; border-radius: 8px; font-size: 1rem; }
        button { padding: 12px 20px; background-color: #2da44e; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: background-color 0.2s; }
        button:hover { background-color: #2c974b; }
        button:disabled { background-color: #94d3a2; cursor: not-allowed; }
        .info-box, .error-box, .results-box, .caution-box { border-radius: 8px; padding: 1rem; margin-top: 1.5rem; }
        .info-box { background-color: #ddf4ff; border: 1px solid #a2d9ff; }
        .error-box { background-color: #ffebe9; border: 1px solid #ffafa3; color: #d82700; font-weight: bold; }
        .results-box { text-align: center; }
        .results-box h3 { margin-top: 0; font-size: 2rem; }
        .up { color: #2da44e; } .down { color: #d82700; }
        .caution-box { background-color: #fff8c5; border: 1px solid #f2c900; }
        .loader { margin: 2rem auto; border: 5px solid #f3f3f3; border-radius: 50%; border-top: 5px solid #3498db; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Stock Trend Predictor üìà</h1>
        <form id="prediction-form">
            <input type="text" id="ticker-input" name="ticker" placeholder="Enter Stock Ticker (e.g., AAPL)" required>
            <button type="submit" id="submit-button">Analyze</button>
        </form>
        <div class="info-box">
            <p><strong>Examples:</strong> AAPL (Apple), GOOGL (Google), MSFT (Microsoft), TSLA (Tesla)</p>
            <p>Find more symbols on <a href="https://finance.yahoo.com/" target="_blank">Yahoo Finance</a>.</p>
        </div>
        <div id="response-area"></div>
    </div>
    <script>
        const form = document.getElementById('prediction-form');
        const tickerInput = document.getElementById('ticker-input');
        const responseArea = document.getElementById('response-area');
        const submitButton = document.getElementById('submit-button');
        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            const ticker = tickerInput.value;
            responseArea.innerHTML = `<div class="loader"></div>`;
            submitButton.disabled = true;
            submitButton.innerText = "Analyzing...";
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ticker: ticker })
                });
                const data = await response.json();
                if (data.error) {
                    displayError(data.error);
                } else {
                    displayResults(data);
                }
            } catch (error) {
                displayError('An unexpected error occurred. Please try again.');
                console.error('Fetch Error:', error);
            } finally {
                submitButton.disabled = false;
                submitButton.innerText = "Analyze";
            }
        });
        function displayError(message) {
            responseArea.innerHTML = `<div class="error-box">${message}</div>`;
        }
        function displayResults(data) {
            const resultClass = data.prediction_text === 'UP' ? 'up' : 'down';
            responseArea.innerHTML = `
                <div class="results-box">
                    <h2>Analysis for ${data.ticker}</h2>
                    <h3>Prediction: <span class="${resultClass}">${data.prediction_text}</span></h3>
                    <p><em>(Overall Model Accuracy on Historical Data: ${data.accuracy})</em></p>
                    <div class="caution-box">
                        <p><strong>‚ö†Ô∏è Disclaimer:</strong> This is an AI-generated prediction based on historical patterns and is not financial advice. Past performance is not indicative of future results.</p>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>

